<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME507TermProject: ME507TermProject</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Cal Poly ME logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">ME507TermProject
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ME507TermProject </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sec_links">Welcome to our Automated Scarecrow</a></li>
<li class="level1"><a href="#section1">Introduction</a></li>
<li class="level1"><a href="#section2">Files for Term Project</a></li>
<li class="level1"><a href="#section3">Developmet Boards and Components</a></li>
<li class="level1"><a href="#section4">CAD Models</a></li>
<li class="level1"><a href="#section5">Task Diagram</a></li>
<li class="level1"><a href="#section6">Finite State Machines</a></li>
<li class="level1"><a href="#section7">Eagle Schematic Drawing</a></li>
<li class="level1"><a href="#section8">Eagle Board Drawing</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="sec_links"></a>
Welcome to our Automated Scarecrow</h1>
<div class="image">
<img src="PHYSPROTO.png" alt="" width="500px"/>
</div>
<h1><a class="anchor" id="section1"></a>
Introduction</h1>
<p >For our project, we designed a robotic scarecrow that detects a heat signature using an IR sensor. Once the sensor is activated, a photo is taken using the ESP32 Camera and the motor for the arms being to shake. This is motion that is intended to scary away any creatures from the items we are protecting. <br  />
 Please scroll below to view more about our project. There is also a link to our respository with all our code as well. <br  />
</p>
<h1><a class="anchor" id="section2"></a>
Files for Term Project</h1>
<p >Here are the links to all the files and details for the Term project <br  />
 File: <a class="el" href="main_8cpp.html">main.cpp</a> <br  />
 File: <a class="el" href="shares_8h.html">shares.h</a> <br  />
 File: <a class="el" href="task__cam_8cpp.html">task_cam.cpp</a> <br  />
 File: <a class="el" href="task__cam_8h.html">task_cam.h</a> <br  />
 File: <a class="el" href="task__ir_8cpp.html">task_ir.cpp</a> <br  />
 File: <a class="el" href="task__ir_8h.html">task_ir.h</a> <br  />
 File: <a class="el" href="task__motors_8cpp.html">task_motors.cpp</a> <br  />
 File: <a class="el" href="task__motors_8h.html">task_motors.h</a> <br  />
 Repository File Link: <a href="https://github.com/mi805/ME507TermProject.github.io">https://github.com/mi805/ME507TermProject.github.io</a> <br  />
 Video Demonstration: <a href="https://drive.google.com/file/d/1YZHCg1weXdl7-m_YWnmx4mzTC4Sv_5Ow/view?ts=638edfa7">https://drive.google.com/file/d/1YZHCg1weXdl7-m_YWnmx4mzTC4Sv_5Ow/view?ts=638edfa7</a> <br  />
</p>
<h1><a class="anchor" id="section3"></a>
Developmet Boards and Components</h1>
<p >These images show the boards we used to run our project. The ESP32 was our main board that we used to control all the other boards. This board operates by recieving input from the IR Sensor and send outputs to the CAM , Motor Drivers, and Wifi functions. The ESP Cam waits for input from the ESP32 which it then takes a photo and stores it on the microSD card. It will also alert the Web server that a photo was taken. The Motor Drivers operate the stepper and Dc motors. The drivers recieve instructions from the ESP32 on how to operate. The IR board acts as the main input for the entire assembly. Once a heat signature is detected, the IR sensor sends a signal to the ESP32. This is where the ESP32 will begin to run certain functions.</p>
<div class="image">
<img src="ESP32.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 1: ESP32 Board Pin Layout</center><p> <br  />
</p>
<div class="image">
<img src="ESPCAM.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 2: ESP Cam Board Pin Layout</center><p> <br  />
</p>
<div class="image">
<img src="Driver.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 3: TB6612FNG Motor Driver Pin Layout</center><p> <br  />
</p>
<div class="image">
<img src="IR.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 4: IR Sensor Board Pin Layout</center><p> <br  />
 <br  />
</p>
<h1><a class="anchor" id="section4"></a>
CAD Models</h1>
<p >These images contain Solidworks Models for Parts and Assemblies of our project. The first couple images show the overall complete assembly for our project from different perspectives. The model of the Gear shows how we attached this to the DC Motor. The middle of the gear has a set screw which connects to the flat part of the DC Motor Shaft. The PCB Mount Assembly illustrates the rotating plate controlled by the Stepper Motor creates the Scanning Motion. The Linkage Assembly highlights the design of the scarecrows wings.</p>
<div class="image">
<img src="ISOASSEM.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 5: Isometric View of Overall Assembly</center><p> <br  />
</p>
<div class="image">
<img src="FRONTASSEM.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 6: Front View of Overall Assembky</center><p> <br  />
</p>
<div class="image">
<img src="GEAR.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 7: Gear used to drive the Linkages</center><p> <br  />
</p>
<div class="image">
<img src="PCBMount.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 8: Top Level PCB Mount with Stepper Motor</center><p> <br  />
</p>
<div class="image">
<img src="LINKS.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 9: Linkage Assembly </center><p> <br  />
 <br  />
</p>
<h1><a class="anchor" id="section5"></a>
Task Diagram</h1>
<p >This image details which values are passed from tasks to other tasks. As shown below, boolean shares are used to interact between the IR, Motor, Cam, and Web tasks. The image also displays the period which is the speed at which the task is repeated as well as the priority which is the order of importance for each task. The higher the priority value, the higher the importance.</p>
<div class="image">
<img src="TASK.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 10: Task Diagram</center><p> <br  />
 <br  />
</p>
<h1><a class="anchor" id="section6"></a>
Finite State Machines</h1>
<p >These images show the state machines that are within three of our main tasks. We have the Motor, IR, and Cam state machines that highlight the states and conditions / actions that allow for transistions. The Motors state machine is altering between two states. A scanning state where the stepper motor is rotating to allow the IR sensor to detect heat and a movement state which activates the DC motor to create the flapping motion. The IR state machine contains two states, searching and scaring. The searching state is the default state in which there is no detection of heat on the sensor. The scaring state is the activation state that will occur when the sensor rises above a set temperature value. For example, if the IR detected heat from a hand, it would enter the scaring state. The Cam state machine remains one state. The sole purpose of this state machine is to wait for input from the IR sensor so that the Cam would know when to take a photo. The photo will then remain on the microSD</p>
<div class="image">
<img src="MFSM.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 11: Motors Finite State Machine</center><p> <br  />
</p>
<div class="image">
<img src="IRFSM.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 12: IR Sensor Finite State Machine</center><p> <br  />
</p>
<div class="image">
<img src="CAMFSM.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 13: ESP Cam Finite State Machine</center><p> <br  />
 <br  />
</p>
<h1><a class="anchor" id="section7"></a>
Eagle Schematic Drawing</h1>
<p >This image shows the Eagle Schematic used to make the PCB board. We ran all code from the ESP32 and used GPIO pins to control the IR sensor and CAM. Each connection utilized is flagged or traced to the needed pin on the other components.</p>
<div class="image">
<img src="SCH.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 14: Eagle Board Drawing</center><p> <br  />
 <br  />
</p>
<h1><a class="anchor" id="section8"></a>
Eagle Board Drawing</h1>
<p >This image shows the Eagle Board that we used for our project. We created pins for the ESP32, ESPCAM, IR sensor, Motor Drivers, and input voltages. By routing all connections through traces, we were able to minimize wire clutter and make our manufactering more effective. The pads on the PCB allow for easier soldering and assembly.</p>
<div class="image">
<img src="PCB.png" alt="" width="500px"/>
</div>
<p> <br  />
 </p><center>Figure 15: Eagle PCB Board</center><p> <br  />
 <br  />
 </p><dl class="section author"><dt>Author</dt><dd>Ethan Nikcevich </dd>
<dd>
Tim Jain </dd>
<dd>
Miles Ibarra </dd></dl>
<dl class="section date"><dt>Date</dt><dd>12-06-22 <br  />
 </dd></dl>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
